//
// Description : This macro fetch data for a gauge
// Input: read token
//        GTS class filter
//        GTS labels filter
//        end timestamp
//        timespan
//        bucket's interval
// Output: [ GTS ]
//
<%
  'interval' STORE
  'span' STORE
  'now' STORE
  'labels' STORE
  'class' STORE
  'token' STORE

  $token
  $class
  $labels
  $now
  $span
  FETCH

  [ SWAP bucketizer.last $now $interval $span $interval / ] BUCKETIZE

  [ NaN NaN NaN 0 ] FILLVALUE // Replace empty spaces by 0
%>
